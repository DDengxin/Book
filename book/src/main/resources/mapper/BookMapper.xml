<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kuang.book.mapper.BookMapper">
    <select id="getAllBook" resultType="BookInfo">
        select * from book_info
    </select>

    <select id="getBookId" parameterType="int" resultType="BookInfo">
        select * from book_info where id=#{id}
    </select>


<select id="getTitle" resultType="BookContent" parameterType="String">
select title,tid,bname from book_content where bname=#{bookName}
</select>


<select id="getContent" resultType="BookContent" parameterType="String">
    select content,title,bname,tid,book_id from book_content where bname = #{bookName} and tid=#{tid}

</select>

<select id="getDescAllBook" resultType="BookInfo">
    select * from book_info order by ticket desc;
</select>

<select id="getDescTypeBook" resultType="BookInfo" parameterType="String">
    select * from book_info where type=#{type} order by ticket desc;
</select>

<select id="getScoreBook" parameterType="String" resultType="BookInfo">
    select * from book_info where type=#{type} order by score desc;
</select>

<select id="getPageBook" resultType="BookInfo" parameterType="map">
    select * from book_info where type=#{type} limit #{count},4
</select>

<insert id="userAddBook" parameterType="String">
    insert into user_collection_book values (#{uid},#{bid})
</insert>

<select id="getCollectionCount" parameterType="String" resultType="int">
    select count(*) from user_collection_book where uid=#{uid}
</select>

<select id="getCollectionBook" parameterType="map" resultType="BookInfo">
     select bname,author,id,img from user_collection_book u,book_info b where u.bid=b.id and u.uid=#{uid} limit #{count},6;
</select>





</mapper>

